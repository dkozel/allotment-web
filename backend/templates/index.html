<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Allotment Dashboard</title>
  <style>
    table { border-collapse: collapse; width: 100%; }
    th, td { padding: 8px; border: 1px solid #ddd; text-align: left; }
    th { background-color: #f2f2f2; }
  </style>
</head>
<body>
  <h1>Allotment Dashboard</h1>
  <p><strong>Total Devices:</strong> {{ device_count }}</p>
  <p><strong>Total Measurements:</strong> {{ measurement_count }}</p>

  <h2>Measurement Details</h2>
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Device ID</th>
        <th>Time</th>
        <th>Temperature (C)</th>
        <th>External Temp (C)</th>
        <th>Humidity</th>
        <th>Battery Voltage</th>
        <th>RSSI</th>
        <th>SNR</th>
      </tr>
    </thead>
    <tbody>
      {% for m in measurements %}
      <tr>
        <td>{{ m.id }}</td>
        <!-- Assuming m.deviceId holds the foreign key or you can also use m.device.deviceID if you load the relation -->
        <td>{{ m.deviceId }}</td>
        <td>{{ m.time }}</td>
        <td>{{ m.tempC }}</td>
        <td>{{ m.tempCExt }}</td>
        <td>{{ m.humidity }}</td>
        <td>{{ m.batteryV }}</td>
        <td>{{ m.rssidB }}</td>
        <td>{{ m.snrdB }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</body>
</html>
